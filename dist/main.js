(()=>{"use strict";class t{getPosition(t){return document.querySelector(t)}getRandomNum(t,e){return Math.floor(Math.random()*(e-t))+t}}new class extends t{constructor(){super(),this.weatherIconPosition=this.getPosition(".weather-icon"),this.temperaturePosition=this.getPosition(".temperature"),this.weatherDescriptionPosition=this.getPosition(".weather-description"),this.windPosition=this.getPosition(".wind"),this.humidityPosition=this.getPosition(".humidity"),this.cityPosition=this.getPosition(".city"),this.city="Vilnius",this.init()}init(){this.localeStorage(),this.input()}createUrl(t){return`https://api.openweathermap.org/data/2.5/weather?q=${t}&lang=en&appid=6dbf9017d0d1b1f5da6659651d7871ec&units=metric`}async getWeather(){const t=this.createUrl(this.city),e=await fetch(t),i=await e.json();console.log(i),this.showWeather(i)}showWeather(t){this.weatherIconPosition.className="weather-icon owf",this.weatherIconPosition.classList.add(`owf-${t.weather[0].id}`),this.temperaturePosition.textContent=`${parseInt(t.main.temp)}Â°C`,this.weatherDescriptionPosition.textContent=t.weather[0].description,this.windPosition.textContent=`Wind speed: ${t.wind.speed} m/s`,this.humidityPosition.textContent=`Humidity: ${t.main.humidity}%`}input(){this.cityPosition.addEventListener("change",(()=>{this.city=this.cityPosition.value,this.getWeather()}))}localeStorage(){window.addEventListener("load",(()=>{const t=localStorage.getItem("city");t?(this.city=t,this.cityPosition.value=t):this.cityPosition.value=this.city,this.cityPosition.setAttribute("placeholder","[Enter city]"),this.getWeather()})),window.addEventListener("beforeunload",(()=>{localStorage.setItem("city",this.cityPosition.value)}))}};const e=new class extends t{constructor(){super(),this.greetingPosition=this.getPosition(".greeting"),this.namePosition=this.getPosition(".name"),this.timeOfDay=null,this.init()}init(){this.localeStorage()}setTimeOfDay(t){this.timeOfDay=t}updateTimeOfDay(t){this.setTimeOfDay(t),this.insertGreetingValue()}localeStorage(){window.addEventListener("load",(()=>{localStorage.getItem("name")&&(this.namePosition.value=localStorage.getItem("name")),this.namePosition.setAttribute("placeholder","[Enter name]")})),window.addEventListener("beforeunload",(()=>{localStorage.setItem("name",this.namePosition.value)}))}insertGreetingValue(){this.greetingPosition.textContent=`Good ${this.timeOfDay},`}},i=new class extends t{constructor(){super(),this.timeOfDay=null,this.sliderPosition=this.getPosition("body"),this.min=1,this.max=20,this.bgNum=this.getRandomNum(1,20),this.init()}init(){this.getPosition(".slide-prev").addEventListener("click",(()=>{this.bgNum=this.bgNum===this.min?this.max:this.bgNum-1,this.setBg()})),this.getPosition(".slide-next").addEventListener("click",(()=>{this.bgNum=this.bgNum===this.max?this.min:this.bgNum+1,this.setBg()}))}setTimeOfDay(t){this.timeOfDay=t}updateTimeOfDay(t){this.setTimeOfDay(t),this.setBg()}createImageUrl(t,e){return`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`}setBg(){const t=new Image,e=this.createImageUrl(this.timeOfDay,this.bgNum.toString().padStart(2,"0"));t.src=e,t.onload=t=>{this.sliderPosition.style.backgroundImage=`url(${e})`}}},s=new class extends t{constructor(t){super(),this.date=new Date,this.currentDay=this.date.getDate(),this.currentHour=this.date.getHours(),this.timePosition=this.getPosition("time"),this.datePosition=this.getPosition("date"),this.partsDayArray=["night","morning","day","evening"],this.init(t)}init({everySecondCallback:t,everyHourCallback:e,everyDayCallback:i}){this.insertTimeValue(),this.insertDateValue(),setInterval((()=>{this.date=new Date,this.insertTimeValue(),this.currentHour!==this.date.getHours()&&(this.currentHour=this.date.getHours(),e&&e()),this.currentDay!==this.date.getDate()&&(this.currentDay=this.date.getDate(),this.insertDateValue())}),1e3)}getTimeOfDay(){return this.partsDayArray[Math.floor(this.currentHour/6)]}insertTimeValue(){this.timePosition.textContent=this.date.toLocaleTimeString()}insertDateValue(){this.datePosition.textContent=this.date.toLocaleDateString("en-En",{weekday:"long",month:"long",day:"numeric"})}}({everyHourCallback:()=>{e.updateTimeOfDay(s.getTimeOfDay()),i.updateTimeOfDay(s.getTimeOfDay())}});e.updateTimeOfDay(s.getTimeOfDay()),i.updateTimeOfDay(s.getTimeOfDay())})();